{
  "title": "Why I'm Optimistic About JavaScript's Future",
  "publishedAt": "2022-12-18",
  "summary": "Learn once, write everywhere – that's the JavaScript way.",
  "body": {
    "raw": "\nDevelopers want to write JavaScript -- and they want it to run everywhere -- in the browser, on the server, or at the edge.\n\nWith all its quirks and imperfections, JavaScript continues to rise in adoption due to its built-in growth hack (it's in the browser), its massive ecosystem of tools and libraries, and the continued growth and adoption of TypeScript. And increasingly, developers are able to learn an API (like `Request` or `Response`) and reuse that same knowledge _everywhere_.\n\nHaving an agreed-up common set of APIs (i.e. standards) and platforms that all support that same interface (e.g. cross-browser support) means web developers can now **learn once, write everywhere**.\n\nThis post will outline recent improvements to the web platform across the browser, server, and edge.\n\n## JavaScript: In the Browser\n\nWeb developers today spend less time writing vendor-specific JavaScript or vendor-specific CSS selectors than ever before.\n\n```jsx\nfunction isIE11() {\n  return !!window.MSInputMethodContext && !!document.documentMode;\n}\n```\n\nWe've escaped the world of padding hacks for maintaining an element's [aspect ratio](https://developer.mozilla.org/en-US/docs/Web/CSS/aspect-ratio):\n\n```css\n@supports not (aspect-ratio: 16/9) {\n  .aspectRatio {\n    overflow: hidden;\n    padding-bottom: 56.25%;\n    height: 0;\n  }\n}\n```\n\nTwo converging trends are making this possible:\n\n- **The death of Internet Explorer:** Now that IE 11 is [officially retired](https://www.bleepingcomputer.com/news/microsoft/microsoft-edge-update-will-disable-internet-explorer-in-february/), web developers can write less vendor-specific CSS, leading to smaller stylesheets and fewer hacks.\n\n- **Browser engine alignment:** The three major browser engines (Chromium/Chrome, Gecko/Firefox, and Webkit/Safari) now have the best cross-browser support for JavaScript, CSS, and Web APIs we've ever seen. Kudos to the [Interop project](https://web.dev/interop-2022/).\n\nNow, of course, it's not perfect across browser engines, nor will it likely ever be. But it's the best it's been and I'm optimistic. Thousands (or millions) of developer hours will be saved cumulatively by not spending a week digging into esoteric IE bugs.\n\nHere's an example of how this alignment can benefit all web developers. Imagine you are a framework author trying to write a reusable image component to help thousands of developers achieve great performance when using images. In 2020, just a few years ago, you need to work _around_ the web platform.\n\nLoading an image without causing a [layout shift](https://web.dev/cls/), correctly maintaining the aspect ratio, and not degrading initial page load performance due to image size/weight was difficult to implement with support across all major browsers. This led to developers either ignoring the issues, or the frameworks writing component abstractions that produced code like:\n\n```jsx\n<span> <-- needed to maintain aspect ratio\n  <span> <-- needed to maintain aspect ratio, CSS padding hacks\n    <img src=\"\" style=\"\" /> <-- inline styles to prevent layout shift\n    <noscript>...</noscript> <-- JS needed for IntersectionObserver\n  </span>\n</span>\n```\n\nIt's a different story in 2022. There's cross-browser support for: `aspect-ratio`, [width/height attributes](https://web.dev/optimize-cls/) to prevent layout shift, native [image lazy-loading](https://developer.mozilla.org/en-US/docs/Web/Performance/Lazy_loading), and pure CSS/SVG-based blur-up image placeholders. The above code can drop the wrapping elements and work without runtime JavaScript needed.\n\n```jsx\n<img\n  alt=\"A kitten\"\n  decoding=\"async\"\n  height=\"200\"\n  loading=\"lazy\"\n  src=\"https://placekitten.com/200/200\"\n  style=\"aspect-ratio: auto 1 / 1\"\n  width=\"200\"\n/>\n```\n\n## JavaScript: On the Server\n\nIsomorphic JavaScript, or code that could run on both the client and the server, has been the ideal state for many web developers. Learn once, write everywhere, right? Until recently, Node.js and the web platform were out of alignment.\n\nConsider fetching data over HTTP. In the browser, we had the [Web Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API). Prior to Node.js 18, there was no built-in solution for fetching data. Making a `fetch` required using packages like `node-fetch` or `undici`, which had a similar but slightly different API, often in non-obvious ways.\n\nThis lack of alignment between platforms meant that tools for writing isomorphic JavaScript, like Next.js, needed to add polyfills so developers could use `fetch` on both the client and the server. With Node.js 18, these tools can now remove additional JavaScript needed to polyfill platform differences, ultimately resulting in less JavaScript needed.\n\nI'm optimistic about JavaScript (and TypeScript) on the server. It's not just `fetch`, either. It's `Request`, `Response`, and **100+ other APIs** that are now available in both the browser and in Node.js. Browser vendors and companies building server infrastructure are now [working closer than ever](https://wintercg.org/) to provide a standard set of APIs that can run everywhere, including edge computing platforms.\n\n## JavaScript: At the Edge\n\nEdge computing, the often misunderstood and newest target for running JavaScript, has had the least standardization of the three (browser, server, edge).\n\nIt's helpful to think about edge as the highest level of abstraction, where you're spending all of your time on business logic.\n\n<Image\n  alt={`Diagram of the edge runtime`}\n  src={`/images/javascript/edge-runtime.png`}\n  width={3840 / 3}\n  height={2160 / 3}\n/>\n\nMoving towards edge computing platforms means a tradeoff for more abstraction, but focusing exclusively on business logic.\n\nEdge isn't something completely new, but rather a deliberate and intentional tradeoff from the existing Node.js world.\n\nYou _want_ to write JavaScript, but edge compute infrastructure requires a lighter subset of the (quite large) Node.js API surface area. By making this tradeoff for a subset of Node.js APIs that also run in the browser, you can have consistently fast cold boots and more cost-effective compute workloads. That sounds _pretty nice_.\n\nLet's look at an example. In this case, I'll use a [Vercel Edge Function](https://vercel.com/blog/edge-functions-generally-available). But it could also be other edge computing platforms like Cloudflare or Deno. For me, the best part of this code is actually that it's fairly boring. It looks like Node.js.\n\n```jsx\nexport const config = {\n  runtime: 'edge'\n}\n\n// Web standard Request API\nexport default function handler(req: Request) {\n  // Web standard URL API\n  const { searchParams } = new URL(req.url)\n  const name = searchParams.get('name')\n\n  // Web standard Fetch API\n  const req = await fetch('https://...', { body: { name } })\n  const data = await req.json()\n\n  // Web standard Response (.json is new)\n  // https://github.com/whatwg/fetch/issues/1389\n  return Response.json(data);\n}\n```\n\nHere's the kicker: it's not just about the infrastructure. It's about the frameworks that are embracing these same Web APIs and helping thousands of new developers learn once and write everywhere.\n\nThis code could work with Next.js. Or SvelteKit. Remix. Fresh. Or the next, new web framework that builds upon the same set of standard APIs.\n\n**What an incredible time to be a web developer.**\n",
    "code": "var Component=(()=>{var h=Object.create;var o=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),m=(l,e)=>{for(var r in e)o(l,r,{get:e[r],enumerable:!0})},s=(l,e,r,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let t of B(e))!u.call(l,t)&&t!==r&&o(l,t,{get:()=>e[t],enumerable:!(a=p(e,t))||a.enumerable});return l};var f=(l,e,r)=>(r=l!=null?h(y(l)):{},s(e||!l||!l.__esModule?o(r,\"default\",{value:l,enumerable:!0}):r,l)),A=l=>s(o({},\"__esModule\",{value:!0}),l);var i=g((D,c)=>{c.exports=_jsx_runtime});var C={};m(C,{default:()=>b,frontmatter:()=>F});var n=f(i()),F={title:\"Why I'm Optimistic About JavaScript's Future\",publishedAt:\"2022-12-18\",summary:\"Learn once, write everywhere \\u2013 that's the JavaScript way.\"};function d(l){let e=Object.assign({p:\"p\",code:\"code\",em:\"em\",strong:\"strong\",h2:\"h2\",a:\"a\",span:\"span\",div:\"div\",pre:\"pre\",ul:\"ul\",li:\"li\"},l.components),{Image:r}=e;return r||v(\"Image\",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"Developers want to write JavaScript -- and they want it to run everywhere -- in the browser, on the server, or at the edge.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"With all its quirks and imperfections, JavaScript continues to rise in adoption due to its built-in growth hack (it's in the browser), its massive ecosystem of tools and libraries, and the continued growth and adoption of TypeScript. And increasingly, developers are able to learn an API (like \",(0,n.jsx)(e.code,{children:\"Request\"}),\" or \",(0,n.jsx)(e.code,{children:\"Response\"}),\") and reuse that same knowledge \",(0,n.jsx)(e.em,{children:\"everywhere\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Having an agreed-up common set of APIs (i.e. standards) and platforms that all support that same interface (e.g. cross-browser support) means web developers can now \",(0,n.jsx)(e.strong,{children:\"learn once, write everywhere\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:\"This post will outline recent improvements to the web platform across the browser, server, and edge.\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"javascript-in-the-browser\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#javascript-in-the-browser\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"JavaScript: In the Browser\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Web developers today spend less time writing vendor-specific JavaScript or vendor-specific CSS selectors than ever before.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#282c34\"},tabIndex:\"0\",\"data-language\":\"jsx\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"jsx\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"function\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,n.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"isIE11\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"() {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"return\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"!!\"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"window\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"MSInputMethodContext\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"&&\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"!!\"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"document\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"documentMode\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"We've escaped the world of padding hacks for maintaining an element's \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/CSS/aspect-ratio\",children:\"aspect ratio\"}),\":\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#282c34\"},tabIndex:\"0\",\"data-language\":\"css\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"css\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"@supports\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"not\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" (aspect-ratio: \"}),(0,n.jsx)(e.span,{style:{color:\"#D19A66\"},children:\"16\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"/\"}),(0,n.jsx)(e.span,{style:{color:\"#D19A66\"},children:\"9\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,n.jsx)(e.span,{style:{color:\"#D19A66\"},children:\".aspectRatio\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"    overflow: \"}),(0,n.jsx)(e.span,{style:{color:\"#D19A66\"},children:\"hidden\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"    padding-bottom: \"}),(0,n.jsx)(e.span,{style:{color:\"#D19A66\"},children:\"56.25\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"%\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"    height: \"}),(0,n.jsx)(e.span,{style:{color:\"#D19A66\"},children:\"0\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Two converging trends are making this possible:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"The death of Internet Explorer:\"}),\" Now that IE 11 is \",(0,n.jsx)(e.a,{href:\"https://www.bleepingcomputer.com/news/microsoft/microsoft-edge-update-will-disable-internet-explorer-in-february/\",children:\"officially retired\"}),\", web developers can write less vendor-specific CSS, leading to smaller stylesheets and fewer hacks.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Browser engine alignment:\"}),\" The three major browser engines (Chromium/Chrome, Gecko/Firefox, and Webkit/Safari) now have the best cross-browser support for JavaScript, CSS, and Web APIs we've ever seen. Kudos to the \",(0,n.jsx)(e.a,{href:\"https://web.dev/interop-2022/\",children:\"Interop project\"}),\".\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Now, of course, it's not perfect across browser engines, nor will it likely ever be. But it's the best it's been and I'm optimistic. Thousands (or millions) of developer hours will be saved cumulatively by not spending a week digging into esoteric IE bugs.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Here's an example of how this alignment can benefit all web developers. Imagine you are a framework author trying to write a reusable image component to help thousands of developers achieve great performance when using images. In 2020, just a few years ago, you need to work \",(0,n.jsx)(e.em,{children:\"around\"}),\" the web platform.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Loading an image without causing a \",(0,n.jsx)(e.a,{href:\"https://web.dev/cls/\",children:\"layout shift\"}),\", correctly maintaining the aspect ratio, and not degrading initial page load performance due to image size/weight was difficult to implement with support across all major browsers. This led to developers either ignoring the issues, or the frameworks writing component abstractions that produced code like:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#282c34\"},tabIndex:\"0\",\"data-language\":\"jsx\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"jsx\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"span\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"> <-- needed to maintain aspect ratio\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  <\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"span\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"> <-- needed to maintain aspect ratio, CSS padding hacks\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"    <\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"img\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,n.jsx)(e.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\"src\"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"\"'}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,n.jsx)(e.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\"style\"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"\"'}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" /> <-- inline styles to prevent layout shift\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"    <\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"noscript\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\">...</\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"noscript\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"> <-- JS needed for IntersectionObserver\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  </\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"span\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\">\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"</\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"span\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\">\"})]})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"It's a different story in 2022. There's cross-browser support for: \",(0,n.jsx)(e.code,{children:\"aspect-ratio\"}),\", \",(0,n.jsx)(e.a,{href:\"https://web.dev/optimize-cls/\",children:\"width/height attributes\"}),\" to prevent layout shift, native \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/Performance/Lazy_loading\",children:\"image lazy-loading\"}),\", and pure CSS/SVG-based blur-up image placeholders. The above code can drop the wrapping elements and work without runtime JavaScript needed.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#282c34\"},tabIndex:\"0\",\"data-language\":\"jsx\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"jsx\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"img\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,n.jsx)(e.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\"alt\"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"A kitten\"'})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,n.jsx)(e.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\"decoding\"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"async\"'})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,n.jsx)(e.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\"height\"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"200\"'})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,n.jsx)(e.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\"loading\"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"lazy\"'})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,n.jsx)(e.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\"src\"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"https://placekitten.com/200/200\"'})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,n.jsx)(e.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\"style\"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"aspect-ratio: auto 1 / 1\"'})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,n.jsx)(e.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\"width\"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"200\"'})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"/>\"})})]})})}),`\n`,(0,n.jsxs)(e.h2,{id:\"javascript-on-the-server\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#javascript-on-the-server\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"JavaScript: On the Server\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Isomorphic JavaScript, or code that could run on both the client and the server, has been the ideal state for many web developers. Learn once, write everywhere, right? Until recently, Node.js and the web platform were out of alignment.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Consider fetching data over HTTP. In the browser, we had the \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API\",children:\"Web Fetch API\"}),\". Prior to Node.js 18, there was no built-in solution for fetching data. Making a \",(0,n.jsx)(e.code,{children:\"fetch\"}),\" required using packages like \",(0,n.jsx)(e.code,{children:\"node-fetch\"}),\" or \",(0,n.jsx)(e.code,{children:\"undici\"}),\", which had a similar but slightly different API, often in non-obvious ways.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"This lack of alignment between platforms meant that tools for writing isomorphic JavaScript, like Next.js, needed to add polyfills so developers could use \",(0,n.jsx)(e.code,{children:\"fetch\"}),\" on both the client and the server. With Node.js 18, these tools can now remove additional JavaScript needed to polyfill platform differences, ultimately resulting in less JavaScript needed.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"I'm optimistic about JavaScript (and TypeScript) on the server. It's not just \",(0,n.jsx)(e.code,{children:\"fetch\"}),\", either. It's \",(0,n.jsx)(e.code,{children:\"Request\"}),\", \",(0,n.jsx)(e.code,{children:\"Response\"}),\", and \",(0,n.jsx)(e.strong,{children:\"100+ other APIs\"}),\" that are now available in both the browser and in Node.js. Browser vendors and companies building server infrastructure are now \",(0,n.jsx)(e.a,{href:\"https://wintercg.org/\",children:\"working closer than ever\"}),\" to provide a standard set of APIs that can run everywhere, including edge computing platforms.\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"javascript-at-the-edge\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#javascript-at-the-edge\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"JavaScript: At the Edge\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Edge computing, the often misunderstood and newest target for running JavaScript, has had the least standardization of the three (browser, server, edge).\"}),`\n`,(0,n.jsx)(e.p,{children:\"It's helpful to think about edge as the highest level of abstraction, where you're spending all of your time on business logic.\"}),`\n`,(0,n.jsx)(r,{alt:\"Diagram of the edge runtime\",src:\"/images/javascript/edge-runtime.png\",width:3840/3,height:2160/3}),`\n`,(0,n.jsx)(e.p,{children:\"Moving towards edge computing platforms means a tradeoff for more abstraction, but focusing exclusively on business logic.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Edge isn't something completely new, but rather a deliberate and intentional tradeoff from the existing Node.js world.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"You \",(0,n.jsx)(e.em,{children:\"want\"}),\" to write JavaScript, but edge compute infrastructure requires a lighter subset of the (quite large) Node.js API surface area. By making this tradeoff for a subset of Node.js APIs that also run in the browser, you can have consistently fast cold boots and more cost-effective compute workloads. That sounds \",(0,n.jsx)(e.em,{children:\"pretty nice\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Let's look at an example. In this case, I'll use a \",(0,n.jsx)(e.a,{href:\"https://vercel.com/blog/edge-functions-generally-available\",children:\"Vercel Edge Function\"}),\". But it could also be other edge computing platforms like Cloudflare or Deno. For me, the best part of this code is actually that it's fairly boring. It looks like Node.js.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{style:{backgroundColor:\"#282c34\"},tabIndex:\"0\",\"data-language\":\"jsx\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"jsx\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"config\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"runtime\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:\"'edge'\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"}\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// Web standard Request API\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"default\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"function\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,n.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"handler\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"req\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"Request\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,n.jsx)(e.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// Web standard URL API\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"searchParams\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"new\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,n.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"URL\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"req\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"url\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\")\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"name\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"searchParams\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"get\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:\"'name'\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\")\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,n.jsx)(e.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// Web standard Fetch API\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"req\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"await\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,n.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"fetch\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:\"'https://...'\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\", { \"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"body\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": { \"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"name\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" } })\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"data\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"await\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"req\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"json\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"()\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,n.jsx)(e.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// Web standard Response (.json is new)\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,n.jsx)(e.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// https://github.com/whatwg/fetch/issues/1389\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"return\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"Response\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"json\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"data\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Here's the kicker: it's not just about the infrastructure. It's about the frameworks that are embracing these same Web APIs and helping thousands of new developers learn once and write everywhere.\"}),`\n`,(0,n.jsx)(e.p,{children:\"This code could work with Next.js. Or SvelteKit. Remix. Fresh. Or the next, new web framework that builds upon the same set of standard APIs.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"What an incredible time to be a web developer.\"})})]})}function w(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,Object.assign({},l,{children:(0,n.jsx)(d,l)})):d(l)}var b=w;function v(l,e){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+l+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return A(C);})();\n;return Component;"
  },
  "_id": "javascript.mdx",
  "_raw": {
    "sourceFilePath": "javascript.mdx",
    "sourceFileName": "javascript.mdx",
    "sourceFileDir": ".",
    "contentType": "mdx",
    "flattenedPath": "javascript"
  },
  "type": "Blog",
  "slug": "javascript",
  "tweetIds": [],
  "structuredData": {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "Why I'm Optimistic About JavaScript's Future",
    "datePublished": "2022-12-18",
    "dateModified": "2022-12-18",
    "description": "Learn once, write everywhere – that's the JavaScript way.",
    "image": "https://homescree.net/og?title=Why I'm Optimistic About JavaScript's Future",
    "url": "https://homescree.net/blog/javascript",
    "author": {
      "@type": "Person",
      "name": "Matthew Guo"
    }
  }
}