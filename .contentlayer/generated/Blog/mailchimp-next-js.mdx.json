{
  "title": "Create A Newsletter with Next.js API Routes and Mailchimp",
  "publishedAt": "2019-11-10",
  "summary": "Learn how to integrate Next.js and React with Mailchimp to build a newsletter subscription form.",
  "body": {
    "raw": "\nYou've probably noticed the rise of newsletters (especially in the developer community). They're an excellent way to promote content to those who really want to read it. If you've ever thought about starting a newsletter, then you've found the right article.\n\n## Mailchimp vs. The World\n\nIf you're just starting a newsletter, you probably want something with a free tier.\nThat was my rationale for adopting [TinyLetter](https://tinyletter.com/). It was simple, easy to set up, and didn't require an API route. Perfect!\n\nHowever, it wasn't exactly a frictionless sign-up process. When a user clicked \"subscribe\", it launched a pop-up window where they had to confirm their email address again.\nAgain, _it works_, but we can do better.\n\nI started to explore using [Mailchimp](https://mailchimp.com/) as an alternative. It also has a [free tier](https://mailchimp.com/pricing/) if you have less than 2,000 subscribers. Perfect.\n\n## Why Next.js?\n\n[Next.js](https://nextjs.org/) is the easiest way to build applications in React. One of my favorite features is API routes.\n\nAPI routes provide a solution for building a complete API inside Next.js.\nAll you need to get started is an `api/` folder inside your main `pages/` folder where your routes live.\n\nEvery file inside `pages/api/` is mapped to `/api/*`. This is where we'll communicate with Mailchimp.\nFirst, we need to set up an account.\n\n## Setting up Mailchimp\n\nAfter [creating an account](https://mailchimp.com/help/create-an-account/), you'll need to fetch your [API key](https://mailchimp.com/help/about-api-keys/#find+or+generate+your+api+key).\n\nWhen a user clicks \"subscribe\", we'll want to add their email address to our [audience](https://mailchimp.com/developer/marketing/guides/create-your-first-audience/#add-a-contact-to-an-audience).\nWe'll need to grab a few values:\n\n- The [API server region](https://mailchimp.com/developer/marketing/guides/quick-start/#make-your-first-api-call) (e.g. `us1`).\n- The [Audience ID](https://mailchimp.com/help/find-audience-id/) for the mailing list.\n\n## Environment Variables\n\nLet's make our secrets we've retrieved available without hardcoding them into our request. Since I'm deploying with [Vercel](https://vercel.com), I'll need to set up some [environment variables](https://nextjs.org/docs/basic-features/environment-variables).\nFirst, let's create `.env.local` for testing locally.\n\n```bash title=\".env.local\"\nMAILCHIMP_API_KEY=\nMAILCHIMP_API_SERVER=\nMAILCHIMP_AUDIENCE_ID=\n```\n\nFinally, [add these environment variables in Vercel](https://vercel.com/docs/environment-variables) so they're available on pull requests (Preview) and in Production.\n\n**Note:** Don't forget to add `.env.local` to your `.gitignore`. We don't want to commit our secrets.\n\n## Creating The Request\n\nNow that we have our values available as environment variables, we can create an API route at `pages/api/subscribe.js` to add a member to our list.\nMake sure you install the `@mailchimp/mailchimp_marketing` library.\n\n```js title=\"pages/api/subscribe.js\"\nimport mailchimp from '@mailchimp/mailchimp_marketing';\n\nmailchimp.setConfig({\n  apiKey: process.env.MAILCHIMP_API_KEY,\n  server: process.env.MAILCHIMP_API_SERVER, // e.g. us1\n});\n\nexport default async (req, res) => {\n  const { email } = req.body;\n\n  if (!email) {\n    return res.status(400).json({ error: 'Email is required' });\n  }\n\n  try {\n    await mailchimp.lists.addListMember(process.env.MAILCHIMP_AUDIENCE_ID, {\n      email_address: email,\n      status: 'subscribed',\n    });\n\n    return res.status(201).json({ error: '' });\n  } catch (error) {\n    return res.status(500).json({ error: error.message || error.toString() });\n  }\n};\n```\n\n## Creating A Form Input\n\nNow that our API is created, we need a way to gather user input. Let's create a component to send a request to our API.\n\n```js title=\"components/Subscribe.js\"\nimport React, { useRef, useState } from 'react';\n\nfunction Subscribe() {\n  // 1. Create a reference to the input so we can fetch/clear it's value.\n  const inputEl = useRef(null);\n  // 2. Hold a message in state to handle the response from our API.\n  const [message, setMessage] = useState('');\n\n  const subscribe = async (e) => {\n    e.preventDefault();\n\n    // 3. Send a request to our API with the user's email address.\n    const res = await fetch('/api/subscribe', {\n      body: JSON.stringify({\n        email: inputEl.current.value,\n      }),\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      method: 'POST',\n    });\n\n    const { error } = await res.json();\n\n    if (error) {\n      // 4. If there was an error, update the message in state.\n      setMessage(error);\n\n      return;\n    }\n\n    // 5. Clear the input value and show a success message.\n    inputEl.current.value = '';\n    setMessage('Success! ðŸŽ‰ You are now subscribed to the newsletter.');\n  };\n\n  return (\n    <form onSubmit={subscribe}>\n      <label htmlFor=\"email-input\">{'Email Address'}</label>\n      <input\n        id=\"email-input\"\n        name=\"email\"\n        placeholder=\"you@awesome.com\"\n        ref={inputEl}\n        required\n        type=\"email\"\n      />\n      <div>\n        {message\n          ? message\n          : `I'll only send emails when new content is posted. No spam.`}\n      </div>\n      <button type=\"submit\">{'âœ¨ Subscribe ðŸ’Œ'}</button>\n    </form>\n  );\n}\n```\n\n## Conclusion\n\nIf you'd like to see a completed example, the entire source code for my blog is [open source](https://github.com/leerob/leerob.io/blob/bfbd33a822fbcbbafd4027aa45884446f6f8ff3c/pages/api/subscribe.js).\n",
    "code": "var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var B=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty;var F=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),u=(n,e)=>{for(var r in e)c(n,r,{get:e[r],enumerable:!0})},a=(n,e,r,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of p(e))!A.call(n,s)&&s!==r&&c(n,s,{get:()=>e[s],enumerable:!(o=B(e,s))||o.enumerable});return n};var C=(n,e,r)=>(r=n!=null?h(y(n)):{},a(e||!n||!n.__esModule?c(r,\"default\",{value:n,enumerable:!0}):r,n)),m=n=>a(c({},\"__esModule\",{value:!0}),n);var t=F((v,i)=>{i.exports=_jsx_runtime});var g={};u(g,{default:()=>D,frontmatter:()=>E});var l=C(t()),E={title:\"Create A Newsletter with Next.js API Routes and Mailchimp\",publishedAt:\"2019-11-10\",summary:\"Learn how to integrate Next.js and React with Mailchimp to build a newsletter subscription form.\"};function d(n){let e=Object.assign({p:\"p\",h2:\"h2\",a:\"a\",span:\"span\",em:\"em\",code:\"code\",ul:\"ul\",li:\"li\",div:\"div\",pre:\"pre\",strong:\"strong\"},n.components);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.p,{children:\"You've probably noticed the rise of newsletters (especially in the developer community). They're an excellent way to promote content to those who really want to read it. If you've ever thought about starting a newsletter, then you've found the right article.\"}),`\n`,(0,l.jsxs)(e.h2,{id:\"mailchimp-vs-the-world\",children:[(0,l.jsx)(e.a,{className:\"anchor\",href:\"#mailchimp-vs-the-world\",children:(0,l.jsx)(e.span,{className:\"icon icon-link\"})}),\"Mailchimp vs. The World\"]}),`\n`,(0,l.jsxs)(e.p,{children:[`If you're just starting a newsletter, you probably want something with a free tier.\nThat was my rationale for adopting `,(0,l.jsx)(e.a,{href:\"https://tinyletter.com/\",children:\"TinyLetter\"}),\". It was simple, easy to set up, and didn't require an API route. Perfect!\"]}),`\n`,(0,l.jsxs)(e.p,{children:[`However, it wasn't exactly a frictionless sign-up process. When a user clicked \"subscribe\", it launched a pop-up window where they had to confirm their email address again.\nAgain, `,(0,l.jsx)(e.em,{children:\"it works\"}),\", but we can do better.\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"I started to explore using \",(0,l.jsx)(e.a,{href:\"https://mailchimp.com/\",children:\"Mailchimp\"}),\" as an alternative. It also has a \",(0,l.jsx)(e.a,{href:\"https://mailchimp.com/pricing/\",children:\"free tier\"}),\" if you have less than 2,000 subscribers. Perfect.\"]}),`\n`,(0,l.jsxs)(e.h2,{id:\"why-nextjs\",children:[(0,l.jsx)(e.a,{className:\"anchor\",href:\"#why-nextjs\",children:(0,l.jsx)(e.span,{className:\"icon icon-link\"})}),\"Why Next.js?\"]}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.a,{href:\"https://nextjs.org/\",children:\"Next.js\"}),\" is the easiest way to build applications in React. One of my favorite features is API routes.\"]}),`\n`,(0,l.jsxs)(e.p,{children:[`API routes provide a solution for building a complete API inside Next.js.\nAll you need to get started is an `,(0,l.jsx)(e.code,{children:\"api/\"}),\" folder inside your main \",(0,l.jsx)(e.code,{children:\"pages/\"}),\" folder where your routes live.\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Every file inside \",(0,l.jsx)(e.code,{children:\"pages/api/\"}),\" is mapped to \",(0,l.jsx)(e.code,{children:\"/api/*\"}),`. This is where we'll communicate with Mailchimp.\nFirst, we need to set up an account.`]}),`\n`,(0,l.jsxs)(e.h2,{id:\"setting-up-mailchimp\",children:[(0,l.jsx)(e.a,{className:\"anchor\",href:\"#setting-up-mailchimp\",children:(0,l.jsx)(e.span,{className:\"icon icon-link\"})}),\"Setting up Mailchimp\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"After \",(0,l.jsx)(e.a,{href:\"https://mailchimp.com/help/create-an-account/\",children:\"creating an account\"}),\", you'll need to fetch your \",(0,l.jsx)(e.a,{href:\"https://mailchimp.com/help/about-api-keys/#find+or+generate+your+api+key\",children:\"API key\"}),\".\"]}),`\n`,(0,l.jsxs)(e.p,{children:[`When a user clicks \"subscribe\", we'll want to add their email address to our `,(0,l.jsx)(e.a,{href:\"https://mailchimp.com/developer/marketing/guides/create-your-first-audience/#add-a-contact-to-an-audience\",children:\"audience\"}),`.\nWe'll need to grab a few values:`]}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsxs)(e.li,{children:[\"The \",(0,l.jsx)(e.a,{href:\"https://mailchimp.com/developer/marketing/guides/quick-start/#make-your-first-api-call\",children:\"API server region\"}),\" (e.g. \",(0,l.jsx)(e.code,{children:\"us1\"}),\").\"]}),`\n`,(0,l.jsxs)(e.li,{children:[\"The \",(0,l.jsx)(e.a,{href:\"https://mailchimp.com/help/find-audience-id/\",children:\"Audience ID\"}),\" for the mailing list.\"]}),`\n`]}),`\n`,(0,l.jsxs)(e.h2,{id:\"environment-variables\",children:[(0,l.jsx)(e.a,{className:\"anchor\",href:\"#environment-variables\",children:(0,l.jsx)(e.span,{className:\"icon icon-link\"})}),\"Environment Variables\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Let's make our secrets we've retrieved available without hardcoding them into our request. Since I'm deploying with \",(0,l.jsx)(e.a,{href:\"https://vercel.com\",children:\"Vercel\"}),\", I'll need to set up some \",(0,l.jsx)(e.a,{href:\"https://nextjs.org/docs/basic-features/environment-variables\",children:\"environment variables\"}),`.\nFirst, let's create `,(0,l.jsx)(e.code,{children:\".env.local\"}),\" for testing locally.\"]}),`\n`,(0,l.jsxs)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:[(0,l.jsx)(e.div,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"bash\",\"data-theme\":\"default\",children:\".env.local\"}),(0,l.jsx)(e.pre,{style:{backgroundColor:\"#282c34\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"bash\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"MAILCHIMP_API_KEY\"}),(0,l.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"MAILCHIMP_API_SERVER\"}),(0,l.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"MAILCHIMP_AUDIENCE_ID\"}),(0,l.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"})]})]})})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Finally, \",(0,l.jsx)(e.a,{href:\"https://vercel.com/docs/environment-variables\",children:\"add these environment variables in Vercel\"}),\" so they're available on pull requests (Preview) and in Production.\"]}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:\"Note:\"}),\" Don't forget to add \",(0,l.jsx)(e.code,{children:\".env.local\"}),\" to your \",(0,l.jsx)(e.code,{children:\".gitignore\"}),\". We don't want to commit our secrets.\"]}),`\n`,(0,l.jsxs)(e.h2,{id:\"creating-the-request\",children:[(0,l.jsx)(e.a,{className:\"anchor\",href:\"#creating-the-request\",children:(0,l.jsx)(e.span,{className:\"icon icon-link\"})}),\"Creating The Request\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Now that we have our values available as environment variables, we can create an API route at \",(0,l.jsx)(e.code,{children:\"pages/api/subscribe.js\"}),` to add a member to our list.\nMake sure you install the `,(0,l.jsx)(e.code,{children:\"@mailchimp/mailchimp_marketing\"}),\" library.\"]}),`\n`,(0,l.jsxs)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:[(0,l.jsx)(e.div,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"js\",\"data-theme\":\"default\",children:\"pages/api/subscribe.js\"}),(0,l.jsx)(e.pre,{style:{backgroundColor:\"#282c34\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"mailchimp\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"from\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#98C379\"},children:\"'@mailchimp/mailchimp_marketing'\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"mailchimp\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"setConfig\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"apiKey\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,l.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"process\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"MAILCHIMP_API_KEY\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"server\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,l.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"process\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"MAILCHIMP_API_SERVER\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// e.g. us1\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"});\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"default\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"async\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"req\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"res\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),(0,l.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"email\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),(0,l.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"req\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"body\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"if\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"!\"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"email\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"    \"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"return\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"res\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"status\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#D19A66\"},children:\"400\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"json\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"({ \"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"error\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,l.jsx)(e.span,{style:{color:\"#98C379\"},children:\"'Email is required'\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" });\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"try\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"    \"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"await\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"mailchimp\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"lists\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"addListMember\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"process\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"MAILCHIMP_AUDIENCE_ID\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\", {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"      \"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"email_address\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"email\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"      \"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"status\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,l.jsx)(e.span,{style:{color:\"#98C379\"},children:\"'subscribed'\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"    });\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"    \"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"return\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"res\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"status\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#D19A66\"},children:\"201\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"json\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"({ \"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"error\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,l.jsx)(e.span,{style:{color:\"#98C379\"},children:\"''\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" });\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  } \"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"catch\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"error\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"    \"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"return\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"res\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"status\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#D19A66\"},children:\"500\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"json\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"({ \"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"error\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,l.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"error\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"message\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"||\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"error\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"toString\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"() });\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"};\"})})]})})]}),`\n`,(0,l.jsxs)(e.h2,{id:\"creating-a-form-input\",children:[(0,l.jsx)(e.a,{className:\"anchor\",href:\"#creating-a-form-input\",children:(0,l.jsx)(e.span,{className:\"icon icon-link\"})}),\"Creating A Form Input\"]}),`\n`,(0,l.jsx)(e.p,{children:\"Now that our API is created, we need a way to gather user input. Let's create a component to send a request to our API.\"}),`\n`,(0,l.jsxs)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:[(0,l.jsx)(e.div,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"js\",\"data-theme\":\"default\",children:\"components/Subscribe.js\"}),(0,l.jsx)(e.pre,{style:{backgroundColor:\"#282c34\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"React\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\", { \"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"useRef\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"useState\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"from\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#98C379\"},children:\"'react'\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"function\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"Subscribe\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"() {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,l.jsx)(e.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 1. Create a reference to the input so we can fetch/clear it's value.\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"inputEl\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"useRef\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#D19A66\"},children:\"null\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,l.jsx)(e.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 2. Hold a message in state to handle the response from our API.\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" [\"}),(0,l.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"message\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,l.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"setMessage\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"] \"}),(0,l.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"useState\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#98C379\"},children:\"''\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"subscribe\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"async\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"e\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\") \"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"    \"}),(0,l.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"e\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"preventDefault\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"    \"}),(0,l.jsx)(e.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 3. Send a request to our API with the user's email address.\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"    \"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"res\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"await\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"fetch\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#98C379\"},children:\"'/api/subscribe'\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\", {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"      \"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"body\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,l.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"JSON\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"stringify\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"        \"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"email\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,l.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"inputEl\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"current\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"value\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"      }),\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"      \"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"headers\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"        \"}),(0,l.jsx)(e.span,{style:{color:\"#98C379\"},children:\"'Content-Type'\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,l.jsx)(e.span,{style:{color:\"#98C379\"},children:\"'application/json'\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"      },\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"      \"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"method\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,l.jsx)(e.span,{style:{color:\"#98C379\"},children:\"'POST'\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"    });\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"    \"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),(0,l.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"error\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),(0,l.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"await\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"res\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"json\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"    \"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"if\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"error\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"      \"}),(0,l.jsx)(e.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 4. If there was an error, update the message in state.\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"      \"}),(0,l.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"setMessage\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"error\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"      \"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"return\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"    }\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"    \"}),(0,l.jsx)(e.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 5. Clear the input value and show a success message.\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"    \"}),(0,l.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"inputEl\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"current\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"value\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#98C379\"},children:\"''\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"    \"}),(0,l.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"setMessage\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#98C379\"},children:\"'Success! \\u{1F389} You are now subscribed to the newsletter.'\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  };\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  \"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"return\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" (\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"    <\"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"form\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\"onSubmit\"}),(0,l.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"{\"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"subscribe\"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\">\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"      <\"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"label\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\"htmlFor\"}),(0,l.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"email-input\"'}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\">\"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"{\"}),(0,l.jsx)(e.span,{style:{color:\"#98C379\"},children:\"'Email Address'\"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"</\"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"label\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\">\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"      <\"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"input\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"        \"}),(0,l.jsx)(e.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\"id\"}),(0,l.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"email-input\"'})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"        \"}),(0,l.jsx)(e.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\"name\"}),(0,l.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"email\"'})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"        \"}),(0,l.jsx)(e.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\"placeholder\"}),(0,l.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"you@awesome.com\"'})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"        \"}),(0,l.jsx)(e.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\"ref\"}),(0,l.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"{\"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"inputEl\"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"}\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"        \"}),(0,l.jsx)(e.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\"required\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"        \"}),(0,l.jsx)(e.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\"type\"}),(0,l.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"email\"'})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"      />\"})}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"      <\"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"div\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\">\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"        \"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"{\"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"message\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"          \"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"?\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"message\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"          \"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#98C379\"},children:\"`I'll only send emails when new content is posted. No spam.`\"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"}\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"      </\"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"div\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\">\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"      <\"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"button\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" \"}),(0,l.jsx)(e.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\"type\"}),(0,l.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"submit\"'}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\">\"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"{\"}),(0,l.jsx)(e.span,{style:{color:\"#98C379\"},children:\"'\\u2728 Subscribe \\u{1F48C}'\"}),(0,l.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"</\"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"button\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\">\"})]}),`\n`,(0,l.jsxs)(e.span,{\"data-line\":\"\",children:[(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"    </\"}),(0,l.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"form\"}),(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\">\"})]}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  );\"})}),`\n`,(0,l.jsx)(e.span,{\"data-line\":\"\",children:(0,l.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})]}),`\n`,(0,l.jsxs)(e.h2,{id:\"conclusion\",children:[(0,l.jsx)(e.a,{className:\"anchor\",href:\"#conclusion\",children:(0,l.jsx)(e.span,{className:\"icon icon-link\"})}),\"Conclusion\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"If you'd like to see a completed example, the entire source code for my blog is \",(0,l.jsx)(e.a,{href:\"https://github.com/leerob/leerob.io/blob/bfbd33a822fbcbbafd4027aa45884446f6f8ff3c/pages/api/subscribe.js\",children:\"open source\"}),\".\"]})]})}function f(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,Object.assign({},n,{children:(0,l.jsx)(d,n)})):d(n)}var D=f;return m(g);})();\n;return Component;"
  },
  "_id": "mailchimp-next-js.mdx",
  "_raw": {
    "sourceFilePath": "mailchimp-next-js.mdx",
    "sourceFileName": "mailchimp-next-js.mdx",
    "sourceFileDir": ".",
    "contentType": "mdx",
    "flattenedPath": "mailchimp-next-js"
  },
  "type": "Blog",
  "slug": "mailchimp-next-js",
  "tweetIds": [],
  "structuredData": {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "Create A Newsletter with Next.js API Routes and Mailchimp",
    "datePublished": "2019-11-10",
    "dateModified": "2019-11-10",
    "description": "Learn how to integrate Next.js and React with Mailchimp to build a newsletter subscription form.",
    "image": "https://homescree.net/og?title=Create A Newsletter with Next.js API Routes and Mailchimp",
    "url": "https://homescree.net/blog/mailchimp-next-js",
    "author": {
      "@type": "Person",
      "name": "Matthew Guo"
    }
  }
}